### VIM

##### normal模式
J: 合并两行  
u: 撤销  
U: 撤销对整行的全部操作  
Ctrl+r: 重做,对撤销的撤销  
ZZ: 保存退出  
Ctrl+]: 跳至标签  
Ctrl+t,Ctrl+o: 跳回之前的位置  

##### 移动光标
w: 光标移至下一个单词首字符 （backward）  
W: 光标后移至词首，以空格为分隔符  
b: 光标移至上一个单词首字符 （end od word）  
B: 光标前移至词首，以空格为分隔符  
e: 光标移至下一个单词尾字符  
E: 光标后移至词尾，以空格为分隔符  
ge: 光标移至上一个单词尾字符  

$: 光标移至当前行尾  
n$: 光标移至下n-1行行尾  
^: 光标移至当前行首  
0: 光标移至绝对行首  

fx: 查找下一个x字符  
nfx: 查找下n个x字符  
Fx: 向前搜索x字符  

tx/Tx: 同fx但将光标停留在x字符前一个字符上  

%: 跳转至与当前光标下括号相匹配的括号上  
n%: 跳转至%n行  
nG: 跳转至第n行  

\`\`: 当使用`G`命令跳转时，vim会标记起跳的位置，\`\`命令可以跳回，再次使用这个命令又会跳转回去，\`\`命令可以在两点之间来回跳转    
Ctrl+o:跳转到更早些时间停置光标的位置    
Ctrl+i:跳转到后来停置光标的更新位置，同`Tab`键   
:jumps :可以列出曾经跳转列表  

###### 屏幕范围跳转
H: 跳转至当前屏幕首行  
M: 跳转至当前屏幕中间  
L: 跳转至当前屏幕末行 

###### 滚屏
Ctrl+u: 光标向上滚动半屏  
Ctrl+d: 光标向下滚动半屏  

Ctrl+f: 向前滚动一屏 forward  
Ctrl+b: 向后滚动一屏 backward  

zz: 把当前行置于屏幕中间   
zt: 把当前行置于屏幕顶端 top  
zb: 把当前行至于屏幕底端 bottom 

###### 具名标记
mx: 设置具名标记，可以a-z自定义标记，使用\`x跳转至标记所在位置，'x可以跳转至标记所在行行首   
:marks :可以查看标记列表  
': 进行此次跳转之前的起跳点  
": 上次编辑该文件时光标最后停留的位置  
\[: 最后一次修改的起始位置  
\]: 最后一次修改的结束位置  
 
###### 显示当前位置
Ctrl+g  
:set num  
:set ruler  

###### 查找WORD
将光标放在`WORD`上，按`*`向下搜索，按`#`向上搜索  
/\<WORD\>查找WORD 

###### 替换
r: 替换单个字符
.: 重复上一次做出的改动
~: 改变当前光标下字符大小写，并将光标移至下一个字符

###### 小幅修改
x: 删除一个字符  
X: 删除光标左边的一个字符  
d: `d`命令后可跟任何一个位移命令，它将删除当前光标位置至位移处的文本内容，d4w, d$，dd等,  
dG：删除当前行至文件尾    
dgg: 删除当前行至文件头  
D: 同d$，删除至行尾  
c: change，与`d`命令类似，但在命令执行后进入Insert模式, `cc`，删除整行    
C: 同c$  
p: 将删除的内容取回了，`P`  
xp: 交换两个字符，x删除一个字符，并放在寄存器中，p将字符取回来放在光标之后     
y: 复制  

###### 正则匹配
^: 行首  
$: 行尾  
.: 匹配单个任意字符    

##### 虚拟模式
v：虚拟字符模式  
V: 虚拟行模式  
Ctrl+v: 虚拟块模式  
o: other end,将光标至于被选文本的另一端  
O: 当使用虚拟块模式时，`o`命令会将光标至于对角线的另一端，`O`可以在同行的两个角上移动  

##### 文本对象
不管当前光标所在的位置而把整个文本对象作为操作对象  
daw: delete a word  
cis: inner sentence, `as` a sentence    

##### 命令行模式
:set ignorecase :忽略大小写  
:set noignorecase  

:set hlsearch: 设置搜索高亮  
:set nohlsearch  
:nohlsearch： 仅去掉当前高亮  

:set incsearch: 增量搜索  
:set nowrapscan: 搜索至文件开头或结尾停止，不循环搜索  

:set showmode   
:set showcmd  
:set ruler  
```
+-------------------------------------------------+  
|text in the Vim window                           |  
|~                                                |  
|~                                                |  
|-- VISUAL --                         2f 43,8 17% |  
+-------------------------------------------------+  
^^^^^^^^^^^                     ^^^^^^^^ ^^^^^^^^^^  
'showmode'                      'showcmd' 'ruler'  
```

:set nowrap: 设置不折行  
:set list: 查看制表符 
:set cmdheight=3: Vim启动时会在窗口最底部留下一行用于显示信息。要显示的信息太长时，Vim或者把它截短让你只能看到部分内容，或者多出来的信息需要
你按下回车键以滚动显示。你可以设置'cmdheight'选项来控制拿出几行来显示这些信息  

###### 命令映射  
:map :设置映射，`:map <F5> i{<Esc>ea}<Esc>`  
:autocmd: 设置自动执行的命令，`autocmd FileType text setlocal textwidth=78`, "autocmd FileType text"是一个自动命令。它所定义的是每当文件类型被设置为"text"时就自动执行它后面的命令。"setlocal textwidth=78"把"textwidth"选项的值设置为78，但这种设置只对当前的一个文件有效。  

#### Plugin
###### 全局plugin
- $VIMRUNTIME/macros  /usr/share/vim/vim74/macros  
- http://www.vim.org  
将plugin放在~/.vim/plugin/目录下即可
:!mkdir ~/.vim
:!mkdir ~/.vim/plugin
:!cp $VIMRUNTIME/macros/matchit.vim ~/.vim/plugin

##### 语法高亮
:syntax enable : 打开语法高亮
在vimrc中打开，在终端支持彩色显示时才启用语法高亮  
```
if &t_Co > 1  
    syntax enable  
endif 
```

查看支持语法高亮的文本: /usr/share/vim/vim74/syntax/  

:syntax clear : 临时关闭语法高亮  
:syntax off : 停止语法高亮  

##### 编辑多个文件
:edit foo.txt : 可以在当前Vim中开始编辑另一个文件。Vim会关闭当前正在编辑的文件打开指定的新文件进行编辑。如果当前文件还有未存盘的内容，Vim会显示错误消息同时也不会打开另一个文件,此时，你可以有几种选择。`:write`保存该文件,`:edit! foo.txt`强制Vim丢弃当前未保存的修改并开始编辑新的文件,`:hide edit foo.txt`如果你想编辑另一个文件，但又不想保存当前文件中的改动，你可以使它变为一个隐藏的缓冲区  

可以在启动Vim时就指定要编辑多个文件: `vim one.c two.c three.c`,Vim将在启动后只显示第一个文件。完成该文件的编辑后，可以以命令`:next`开始下一个文件的编辑。`:wnext`保存当前工作成果并继续下一个文件的编辑；`:args`可以查看整个列表中就有哪些文件，正在编辑的那一个文件将会以方括号括起来；`:previous`回到前一个文件，`:wprevious`保存当前工作成果并回到前一个文件;`:last`移到最后一个文件;`:first`移到第一个文件；不过没有":wlast"或者":wfirst"这样的命令；也可以在":next"和":previous"命令前面使用一个命令计数`2next`

:set autowrite : 当你在不同文件之间转移时，你必需记住用":write"命令来存盘。否则就会得到一个错误消息。如果你确定自己每次都是要保存文件，就可以告诉Vim每当需要时就自动保存文件  
:set noautowrite  

当你有一个列表的文件要编辑时，Vim假设你要全部编辑它们。为防止你漏掉某些文件过早地退出，Vim会在你没有编辑过最后一个文件就想退出时给出一个错误信息，如果你确定要退出，只要再执行一次退出命令

CTRL+^: 在两个文件间快速切换,注意`CTRL+^`命令并不改变当前你在文件列表中的位置，只有命令":next"和":previous"才会引起此位置的变化

\`"：这个标记会带你到上次你离开该文件时光标所在的位置
\`.： 光标移至最后一次对文件做出改动处

小写字母命名的是全局标记，大写字母命名的是全局标记
假设我们正编辑"foo.txt"。到文件的半中间("50%")处设置一个名为F的标记(F意为foo): 50%mF
现在转而编辑"bar.txt"并在其最后一行设置一个名为B(B意为bar)的标记: GmB
现在你可以用"\`F"命令跳转到文件foo.txt的半中间。或者编辑另一个文件，"\`B"命令会再把你带回文件bar.txt的最后一行
要知道某个标记所代表的位置是什么，可以将该标记的名字作为"marks"命令的参数：` :marks F`
如果你删除了标记所在的行，同时也就等于删除了该标记

###### 不同文件间复制粘贴
使用寄存器a-z,`"`  
`"fas`: 把一个句子复制到名为f的寄存器中  
`"l3Y`: 把3个整行的内容放到寄存器l中  
`"fp`: 复制寄存器中的内容  

以只读的方式打开文件：`vim -R file`, 但任然可以强制保存`:w!`;想强制性地避免对文件进行修改，可以用命令`vim -M file`

:saveas move.c : 重命名

##### 分割窗口
:split : 该命令将屏幕分为上下两个窗口并将光标定位在上面的窗口中    
Ctrl-w w: 可以切换窗口  关闭除当前窗口外的所有其它窗口
:close : 关闭窗口  
:only : 关闭除当前窗口外的所有其它窗口  

:split two.c : 为另一个文件分隔出一个窗口
:new : 打开一个新窗口并开始编辑一个空的缓冲区  
可以重复使用":split"和":new"命令打开任何你喜欢的窗口数目

###### 调整窗口高度  
:3split alpha.c : ":split"命令还可以接受一个参数。如果指定了这个参数的话，它将会作为新打开窗口的高度  
Ctrl-w + ： 增加当前窗口高度；Ctrl-w -: 减小  
`{height}Ctrl-w _` : 将窗口高度指定为一个固定的高度  
让窗口达到它可能的最大高度，不指定命令记数直接使用`Ctrl-w _`

###### 垂直分割
:vsplit
:vnew :用于垂直分隔窗口并在其中打开一个新的空缓冲区  

####### 切换窗口  
因为你可以以水平和垂直方向任意分隔窗口，最终的窗口布局也会五花八门。置身于众多的窗口你需要在里面来去自如  
```
CTRL-W h 到左边的窗口
CTRL-W j 到下面的窗口
CTRL-W k 到上面的窗口
CTRL-W l 到右边的窗口
CTRL-W t 到顶部窗口
CTRL-W b 到底部窗口
```

####### 移动窗口  
如果你已经分隔出了几个窗口，但对它们的位置不满意。这时你需要一个命令来移动它们的相对位置
```
CTRL-W K 向下移动窗口
CTRL-W H 向左移动窗口
CTRL-W J 向下移动窗口
CTRL-W L 向右移动窗口
```
####### 针对所有窗口操作的命令  
:qall : quit all
:wall : write all
:wqall
:qall!  

`vim -o one.txt two.txt three.txt `使用"-o"选项可以让Vim为每一个文件打开一个窗口

vimdiff main.c~ main.c
折叠的栏位可以用使用"zo"来展开折叠，用"zc"再把它们折起

:vertical diffsplit main.c : 另 一 种 进 入diff模 式 的 办 法
:set noscrollbind : 设置两个窗口同步滚动  

要消除一个不同之处，你可以把高亮起来的文件从一个窗口移到另一个窗口去使用`dp`命令  
将光标移到右边的窗口，到"changed"插入的位置使用`do`命令  

####### 页签  
可能你已经注意到windows的窗口并不会互相交迭，如果挨个平铺下来你的显示屏幕很快就不够用了。解决之道在于页签  
:tabedit thatfile : 命令在一个窗口中打开"thatfile"，该窗口占据着整个的Vim显示区域  
gt : 切换至下一个页签，goto tab
gT : 切换至上一个页签  
ngt: 切换至下n个页签  
:tab help gt
"tabonly"命令会关闭除当前页签之外的所有页签，除非那些页签中有未保存的改动  



















